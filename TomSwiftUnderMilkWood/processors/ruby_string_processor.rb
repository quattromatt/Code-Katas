require_relative 'line_processor'

class RubyStringProcessor

	def process()

		# Instantiate a text map
		text_map = Hash.new

		# Get a line processor
		line_processor = LineProcessor.new

		# Let the line processor process the one line
		line_processor.process(@@text, text_map)

	end

	@@text = "So, when the house he lived in, and the furniture, and even the
applecart were sold to pay his father's debts, and he found himself
left with the old fiddle that nobody wanted and the old donkey that no
one would have it being both vicious and unruly he uttered no word
of complaint. He simply straddled the donkey and took the fiddle under
his arm and rode out into the world to seek his fortune.

When he came to a village he played a merry tune upon the fiddle and
sang a merry song with it, and the people gave him food most
willingly. There was no trouble about a place to sleep, for if he was
denied a bed he lay down with the donkey in a barn, or even on the
village green, and making a pillow of the donkey's neck he slept as
soundly as anyone could in a bed of down.

And so he continued riding along and playing upon his fiddle for many
years, until his head grew bald and his face was wrinkled and his
bushy eyebrows became as white as snow. But his eyes never lost their
merry twinkle, and he was just as fat and hearty as in his younger
days, while, if you heard him singing his songs and scraping upon the
old fiddle, you would know at once his heart was as young as ever.

He never guided the donkey, but let the beast go where it would, and
so it happened that at last they came to Whatland, and entered one day
the city where resided the King of that great country.

Now, even as Cole rode in upon his donkey the King of Whatland lay
dying in his palace, surrounded by all the luxury of the court. And as
he left no heir, and was the last of the royal line, the councilors
and wise men of Whatland were in a great quandary as to who should
succeed him. But finally they bethought themselves of the laws of the
land, and upon looking up the records they found in an old book a law
that provided for just such a case as this.

So one of the officers of the court went out and soon returned with
three fiddlers, and when at the King's command they struck up a tune,
the monarch was delighted, for every fiddler had a very fine fiddle
and knew well how to use it.

Now, Old King Cole was a merry old soul, so he soon set all the ladies
and gentlemen of the court to dancing, and he himself took off his
crown and his ermine robe and laid them upon the throne, while he
danced with the prettiest lady present till he was all out of breath.

Then he dismissed them, and they were all very well pleased with the
new King, for they saw that, in spite of his odd ways, he had a kind
heart, and would try to make everyone about him as merry as he was
himself.

The next morning the King was informed that several of his subjects
craved audience with him, as there were matters of dispute between
them that must be settled. King Cole at first refused to see them,
declaring he knew nothing of the quarrels of his subjects and they
must manage their own affairs; but when the prime minister told him it
was one of his duties as king, and the law required it, he could not
do otherwise than submit. So he put on his crown and his ermine robe
and sat upon the throne, although he grumbled a good deal at the
necessity; for never having had any business of his own to attend to
he thought it doubly hard that in his old age he must attend to the
business of others.

The first case of dispute was between two men who each claimed to own
a fine cow, and after hearing the evidence, the King ordered the cow
to be killed and roasted and given to the poor, since that was the
easiest way to decide the matter. Then followed a quarrel between two
subjects over ten pieces of gold, one claiming the other owed him that
sum. The King, thinking them both rascals, ordered the gold to be
paid, and then he took it and scattered it amongst the beggars outside
the palace.

By this time King Cole decided he had transacted enough business for
one day, so he sent word to those outside that if anyone had a quarrel
that was not just he should be severely punished; and, indeed, when
the subjects learned the manner in which the King settled disputes,
they were afraid to come to him, as both sides were sure to be losers
by the decision. And that saved King Cole a lot of trouble thereafter,
for the people thought best to settle their own differences.

Every evening he had a dance in the palace; and every day there were
picnics and merrymakings of all kinds, and before long King Cole had
the reputation of having the merriest court in all the world.

He loved to feast and to smoke and to drink his punch, and he was
never so merry as when others were merry with him, so that the three
fiddlers were almost always by his side, and at any hour of the day
you could hear sweet strains of music echoing through the palace.

Old King Cole did not forget the donkey that had been his constant
companion for so long. He had a golden saddle made for him, with a
saddle-cloth broidered in gold and silver, and the bridle was studded
with diamonds and precious stones, all taken from the King's treasury.

And when he rode out, the old fat King always bestrode the donkey,
while his courtiers rode on either side of him upon their prancing
chargers.

Old King Cole reigned for many years, and was generally beloved by his
subjects; for he always gave liberally to all who asked, and was
always as merry and happy as the day was long.

When he died the new King was found to be of a very different temper,
and ruled the country with great severity; but this only served to
make the memory of Old King Cole more tenderly cherished by his
people, and they often sighed when they recalled his merry pranks, and
the good times they enjoyed under his rule."
end